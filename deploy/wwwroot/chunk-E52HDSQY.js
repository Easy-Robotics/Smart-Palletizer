import{a as Ae}from"./chunk-KTKEOD2M.js";import{a as Me,c as Oe}from"./chunk-O2475MJB.js";import{a as N,b as Ie}from"./chunk-LZP6B7YF.js";import{a as Te}from"./chunk-2Z6T37XV.js";import{$ as Q,$a as se,Ab as he,Ba as ie,Bb as Ce,Cb as Se,Db as fe,E as l,F as S,Ib as Ee,K as h,L as d,Lb as xe,M as F,Mb as Pe,O as a,P as o,Pb as D,Q as b,R as U,Rb as ve,S as j,Sa as O,Sb as k,T as z,Ta as Y,Tb as V,U as L,Ua as I,Ub as Le,V as C,Va as ae,Vb as we,W as p,Wa as oe,Wb as be,Xa as re,Ya as le,Z as H,Za as pe,_ as $,_a as ce,a as G,aa as q,ba as m,bb as _e,ca as y,da as w,db as de,ea as W,fa as f,fb as me,ga as E,gb as ge,ha as x,hb as A,ia as M,ib as R,ja as X,jb as ue,la as Z,ma as g,na as u,pa as J,qa as K,u as T,ua as ee,va as te,xb as ye,y as s,z as _,za as ne}from"./chunk-KHVE27WA.js";var Re=(()=>{class i{constructor(e,n,t){this.dialogRef=e,this.dialogConfig=n,this.layoutSchemaService=t}ngOnInit(){this.generatorConfigId=this.dialogConfig.data.generatorConfigId,this.schemaDataForm=new oe({name:new re(null,[Y.required,Y.minLength(3)])})}ngOnDestroy(){this.dialogRef&&this.dialogRef.close()}onSaveBtnClicked(){if(this.schemaDataForm.valid){var e={name:this.schemaDataForm.get("name")?.value,generatorConfigurationId:this.generatorConfigId};this.layoutSchemaService.createLayoutSchema(e).subscribe(t=>{t&&this.closeDialog(t.name)})}}onCancelBtnClicked(){this.closeDialog(null)}closeDialog(e){this.dialogRef.close(e)}static{this.\u0275fac=function(n){return new(n||i)(S(we),S(Le),S(N))}}static{this.\u0275cmp=T({type:i,selectors:[["app-create-schema-dialog"]],standalone:!0,features:[M],decls:13,vars:14,consts:[[1,"dialog-content",3,"formGroup"],[1,"content-block"],["pInputText","","id","name","type","text","formControlName","name",3,"placeholder"],["for","name"],[1,"button-group"],[3,"onClick","label","disabled"],["severity","secondary",3,"onClick","label"]],template:function(n,t){n&1&&(a(0,"form",0)(1,"div",1)(2,"p-floatLabel"),b(3,"input",2),g(4,"translate"),a(5,"label",3),m(6),g(7,"translate"),o()()(),a(8,"div",4)(9,"p-button",5),g(10,"translate"),C("onClick",function(){return t.onSaveBtnClicked()}),o(),a(11,"p-button",6),g(12,"translate"),C("onClick",function(){return t.onCancelBtnClicked()}),o()()()),n&2&&(d("formGroup",t.schemaDataForm),l(3),d("placeholder",u(4,6,"LAYER_PAGE.ASSIGN_SCHEMA_NAME_PLACEHOLDER")),l(3),y(u(7,8,"LAYER_PAGE.NAME_LABEL")),l(3),d("label",u(10,10,"BUTTON.SAVE"))("disabled",!t.schemaDataForm.valid),l(2),d("label",u(12,12,"BUTTON.CANCEL")))},dependencies:[D,R,A,pe,O,I,ae,Ee,de,se,_e,V,k],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;gap:1rem;min-width:300px}.dialog-content[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;padding:.5rem}.dialog-content[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   p-floatLabel[_ngcontent-%COMP%]{width:100%}.dialog-content[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]   p-floatLabel[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.dialog-content[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;gap:2rem;margin:1rem 0}"]})}}return i})();var Ue=["patternCanvas"],je=()=>({position:"absolute",top:"50%",left:"50%","z-index":"1155"}),ze=(i,c)=>({interlayerIndex:i,height:c});function He(i,c){i&1&&b(0,"p-progressSpinner",24),i&2&&F(X(2,je))}function $e(i,c){if(i&1&&(a(0,"div",32),m(1),o()),i&2){let e=c.$implicit,n=p(2);l(),y(n.translateLayerName(e.layerType))}}function Qe(i,c){i&1&&z(0)}function qe(i,c){if(i&1&&(U(0),h(1,Qe,1,0,"ng-container",33),j()),i&2){let e=c.$implicit;p(2);let n=q(35);l(),d("ngTemplateOutlet",n)("ngTemplateOutletContext",Z(2,ze,e.interlayerIndex,e.interlayerHeight))}}function Xe(i,c){if(i&1&&(a(0,"div",25)(1,"div",26),h(2,$e,2,1,"div",27),a(3,"div",28),m(4),g(5,"translate"),o()(),a(6,"div",29)(7,"div",30),m(8,"<\u2212\u2212\u2212\u2212\u2212 IL -"),o(),h(9,qe,2,5,"ng-container",31),o()()),i&2){let e=p();l(2),d("ngForOf",e.layerStackingData),l(2),y(u(5,3,"LAYER_PAGE.PALLET")),l(5),d("ngForOf",e.layerStackingData)}}function Ze(i,c){if(i&1&&(a(0,"div",34),m(1),g(2,"translate"),o()),i&2){let e=p();l(),W("",u(2,2,"LAYER_PAGE.PRODUCT_ON_PALLET"),": ",e.productsOnPallet,"")}}function Je(i,c){i&1&&(a(0,"tr")(1,"th"),m(2),g(3,"translate"),o(),a(4,"th"),m(5),g(6,"translate"),o(),a(7,"th"),m(8),g(9,"translate"),o(),a(10,"th"),m(11),g(12,"translate"),o(),a(13,"th"),m(14),g(15,"translate"),o(),a(16,"th"),m(17),g(18,"translate"),o()()),i&2&&(l(2),y(u(3,6,"TABLE.NO")),l(3),y(u(6,8,"TABLE.LAYER_NAME")),l(3),w("",u(9,10,"TABLE.X")," (mm)"),l(3),w("",u(12,12,"TABLE.Y")," (mm)"),l(3),w("",u(15,14,"TABLE.ROTATION")," (\xB0)"),l(3),y(u(18,16,"TABLE.ROUTINE")))}function Ke(i,c){if(i&1){let e=L();a(0,"input",46),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.x,t)||(r.x=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())}),o()}if(i&2){let e=p().$implicit;f("ngModel",e.x)}}function et(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.x)}}function tt(i,c){if(i&1){let e=L();a(0,"input",46),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.y,t)||(r.y=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())}),o()}if(i&2){let e=p().$implicit;f("ngModel",e.y)}}function nt(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.y)}}function it(i,c){if(i&1){let e=L();a(0,"input",46),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.a,t)||(r.a=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())}),o()}if(i&2){let e=p().$implicit;f("ngModel",e.a)}}function at(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.a)}}function ot(i,c){if(i&1){let e=L();a(0,"input",47),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.approachRoutine,t)||(r.approachRoutine=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteInterlayerLayoutPoints())}),o()}if(i&2){let e=p().$implicit,n=p(2);f("ngModel",e.approachRoutine),d("pTooltip",n.routineTooltip)}}function rt(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.approachRoutine)}}function lt(i,c){if(i&1&&(a(0,"tr",39)(1,"td"),m(2),o(),a(3,"td"),m(4),o(),a(5,"td",40)(6,"p-cellEditor"),h(7,Ke,1,1,"ng-template",41)(8,et,1,1,"ng-template",42),o()(),a(9,"td",43)(10,"p-cellEditor"),h(11,tt,1,1,"ng-template",41)(12,nt,1,1,"ng-template",42),o()(),a(13,"td",44)(14,"p-cellEditor"),h(15,it,1,1,"ng-template",41)(16,at,1,1,"ng-template",42),o()(),a(17,"td",45)(18,"p-cellEditor"),h(19,ot,1,2,"ng-template",41)(20,rt,1,1,"ng-template",42),o()()()),i&2){let e=c.$implicit;d("pSelectableRow",e),l(2),y(e.index+1),l(2),y(e.name),l(),d("pEditableColumn",e.x),l(4),d("pEditableColumn",e.y),l(4),d("pEditableColumn",e.a),l(4),d("pEditableColumn",e.approachRoutine)}}function pt(i,c){if(i&1&&(a(0,"div")(1,"div",35),m(2),g(3,"translate"),o(),a(4,"p-table",36),h(5,Je,19,18,"ng-template",37)(6,lt,21,7,"ng-template",38),o()()),i&2){let e=p();l(2),y(u(3,2,"LAYER_PAGE.INTERLAYER_TABLE_HEADER")),l(2),d("value",e.interlayerTableData)}}function ct(i,c){i&1&&(a(0,"tr")(1,"th"),m(2),g(3,"translate"),o(),a(4,"th"),m(5),g(6,"translate"),o(),a(7,"th"),m(8),g(9,"translate"),o(),a(10,"th"),m(11),g(12,"translate"),o(),a(13,"th"),m(14),g(15,"translate"),o()()),i&2&&(l(2),y(u(3,5,"TABLE.NO")),l(3),w("",u(6,7,"TABLE.X")," (mm)"),l(3),w("",u(9,9,"TABLE.Y")," (mm)"),l(3),w("",u(12,11,"TABLE.ROTATION")," (\xB0)"),l(3),y(u(15,13,"TABLE.ROUTINE")))}function st(i,c){if(i&1){let e=L();a(0,"input",46),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.x,t)||(r.x=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())}),o()}if(i&2){let e=p().$implicit;f("ngModel",e.x)}}function _t(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.x)}}function dt(i,c){if(i&1){let e=L();a(0,"input",46),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.y,t)||(r.y=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())}),o()}if(i&2){let e=p().$implicit;f("ngModel",e.y)}}function mt(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.y)}}function gt(i,c){if(i&1){let e=L();a(0,"input",46),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.a,t)||(r.a=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())}),o()}if(i&2){let e=p().$implicit;f("ngModel",e.a)}}function ut(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.a)}}function yt(i,c){if(i&1){let e=L();a(0,"input",47),x("ngModelChange",function(t){s(e);let r=p().$implicit;return E(r.approachRoutine,t)||(r.approachRoutine=t),_(t)}),C("blur",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())})("keydown.enter",function(){s(e);let t=p(3);return _(t.rewriteLayerLayoutPositions())}),o()}if(i&2){let e=p().$implicit,n=p(2);f("ngModel",e.approachRoutine),d("pTooltip",n.routineTooltip)}}function ht(i,c){if(i&1&&m(0),i&2){let e=p().$implicit;y(e.approachRoutine)}}function Ct(i,c){if(i&1&&(a(0,"tr")(1,"td"),m(2),o(),a(3,"td",40)(4,"p-cellEditor"),h(5,st,1,1,"ng-template",41)(6,_t,1,1,"ng-template",42),o()(),a(7,"td",43)(8,"p-cellEditor"),h(9,dt,1,1,"ng-template",41)(10,mt,1,1,"ng-template",42),o()(),a(11,"td",44)(12,"p-cellEditor"),h(13,gt,1,1,"ng-template",41)(14,ut,1,1,"ng-template",42),o()(),a(15,"td",45)(16,"p-cellEditor"),h(17,yt,1,2,"ng-template",41)(18,ht,1,1,"ng-template",42),o()()()),i&2){let e=c.$implicit,n=c.rowIndex;l(2),y(n+1),l(),d("pEditableColumn",e.x),l(4),d("pEditableColumn",e.y),l(4),d("pEditableColumn",e.a),l(4),d("pEditableColumn",e.approachRoutine)}}function St(i,c){if(i&1){let e=L();a(0,"div")(1,"div",48)(2,"div"),m(3),g(4,"translate"),o(),a(5,"p-dropdown",7),g(6,"translate"),x("ngModelChange",function(t){s(e);let r=p();return E(r.layerLayoutNameSelected,t)||(r.layerLayoutNameSelected=t),_(t)}),C("onChange",function(){s(e);let t=p();return _(t.updateLayerPointsTableData())}),o()(),a(7,"p-table",36),h(8,ct,16,15,"ng-template",37)(9,Ct,19,5,"ng-template",38),o()()}if(i&2){let e=p();l(3),y(u(4,5,"LAYER_PAGE.PRODUCT_TABLE_HEADER")),l(2),d("placeholder",u(6,7,"LAYER_PAGE.SELECT_LAYER_PLACEHOLDER"))("options",e.layerLayoutSelections),f("ngModel",e.layerLayoutNameSelected),l(2),d("value",e.layerPointsTableData)}}function ft(i,c){if(i&1&&(a(0,"div",30),m(1),o()),i&2){let e=c.interlayerIndex,n=c.height;l(),W("<\u2212\u2212\u2212\u2212\u2212 IL ",e,": ",n," mm")}}var Ft=(()=>{class i{constructor(e,n,t,r,P,v,B){this.generatorConfigService=e,this.messageService=n,this.dialogService=t,this.layoutSchemaService=r,this.routineService=P,this.changeDetectorRef=v,this.translateService=B,this.generatorConfigSelections=[],this.layoutSchemaSelections=[],this.layerLayoutSelections=[],this.layerStackingData=[],this.productsOnPallet=void 0,this.interlayerTableData=[],this.layerPointsTableData=[],this.routineSelections=[],this.routineTooltip="",this.blockedDocument=!1}ngOnInit(){this.initGeneratorConfigSelections(),this.initApproachRetractRoutineSelections()}ngOnDestroy(){this.dialogRef&&this.dialogRef.close()}initGeneratorConfigSelections(){this.generatorConfigService.getGeneratorConfigOverview().subscribe(e=>{e&&(this.generatorConfigSelections=e.map(n=>({label:n.name,value:n.id})))})}onGeneratorConfigurationChanged(){this.generatePattern(),this.initLayoutSchemaSelections()}initLayoutSchemaSelections(){this.layoutSchemaService.getLayoutSchemaOverview().subscribe(e=>{if(e&&e.findIndex(n=>n.generatorConfigutationId===this.generatorConfigIdSelected)!==-1){let n=e.find(t=>t.generatorConfigutationId===this.generatorConfigIdSelected)?.layoutSchemaIdNameMap||{};this.layoutSchemaSelections=Object.entries(n).map(([t,r])=>({label:r,value:t})),this.layoutSchemaSelections.unshift({label:"None",value:null})}else this.layoutSchemaSelections=[]})}generatePattern(){this.generatorConfigService.GetPalletizingResult(this.generatorConfigIdSelected).subscribe(e=>{e&&(this.productsOnPallet=e.generatorResults.resultData.numberOfProductsOnPallet,this.palletizingData=G({},e),this.refreshWebElementData(),this.messageService.add({severity:"success",summary:this.translateService.instant("MESSAGE.SUCCESS"),detail:this.translateService.instant("LAYER_PAGE.PATTERN_LOAD_DETAIL")}))})}refreshWebElementData(){this.updateInterlayerTableData(),this.updatelayerLayoutSelections(),this.updateLayerPointsTableData(),this.updateLayerStackingData(),this.renderPatternResult(this.patternCanvas.nativeElement,this.palletizingData)}onLayoutSchemaChanged(){let e={generatorConfigurationId:this.generatorConfigIdSelected,layoutSchemaId:this.layoutSchemaIdSelected};this.layoutSchemaService.getPalletizerResultWithSchemaAsync(e).subscribe(n=>{n&&(n.schemaMatch?this.messageService.add({severity:"success",summary:this.translateService.instant("MESSAGE.SUCCESS"),detail:this.translateService.instant("LAYER_PAGE.SCHEMA_LOAD_DETAIL")}):this.messageService.add({severity:"warn",summary:this.translateService.instant("MESSAGE.WARN"),detail:this.translateService.instant("LAYER_PAGE.SCHEMA_LOAD_WARN")}),this.productsOnPallet=n.generatorResults.resultData.numberOfProductsOnPallet,this.palletizingData=G({},n),this.refreshWebElementData())})}updateInterlayerTableData(){this.interlayerTableData=[],this.palletizingData.generatorResults.interlayerLayoutPoints.forEach((e,n)=>{this.interlayerTableData.push({index:n,name:"IL "+(n+1),x:e.x,y:e.y,a:e.a,approachRoutine:e.approachRoutine})})}updatelayerLayoutSelections(){this.layerLayoutSelections=[],this.palletizingData.generatorResults.layerLayouts.forEach(e=>{this.layerLayoutSelections.push({label:this.translateLayerName(e.layerName),value:e.layerName})}),this.layerLayoutNameSelected=this.palletizingData.generatorResults.layerLayouts[0].layerName}updateLayerStackingData(){let e=this.palletizingData.generatorResults.layerLayouts;this.layerStackingData=this.palletizingData.generatorResults.layerStackingData.map(n=>({layerType:e[n.layerLayoutIndex-1]?.layerName||"Unknown",interlayerHeight:n.interlayerHeight,interlayerIndex:n.interlayerIndex})).reverse()}updateLayerPointsTableData(){let e=this.palletizingData.generatorResults.layerLayouts.find(n=>n.layerName===this.layerLayoutNameSelected);if(e){this.layerPointsTableData=[],e.layerPositions.forEach((t,r)=>{this.layerPointsTableData.push({index:r,x:t.x,y:t.y,a:t.a,approachRoutine:t.approachRoutine})});let n=this.palletizingData.generatorResults.layerLayouts.findIndex(t=>t.layerName===this.layerLayoutNameSelected);this.renderPatternResult(this.patternCanvas.nativeElement,this.palletizingData,n)}}renderPatternResult(e,n,t=0){try{let r=Me(e,n.generatorConfiguration.palletData);Oe(e,n,r,t)}catch(r){this.messageService.add({severity:"warn",summary:this.translateService.instant("MESSAGE.WARN"),detail:r.message||this.translateService.instant("MESSAGE.RENDERING_WARN")})}}showAddSchemaDialog(){this.dialogRef=this.dialogService.open(Re,{header:this.translateService.instant("LAYER_PAGE.ADD_SCHEMA_DIALOG_HEADER"),width:"500px",contentStyle:{"max-height":"80vh",overflow:"auto"},baseZIndex:1e4,data:{generatorConfigId:this.generatorConfigIdSelected}}),this.dialogRef.onClose.subscribe(e=>{e&&(this.initLayoutSchemaSelections(),this.messageService.add({severity:"success",summary:this.translateService.instant("MESSAGE.SUCCESS"),detail:this.translateService.instant("LAYER_PAGE.ADD_SCHEMA_DETAIL",{name:e})}))})}initApproachRetractRoutineSelections(){this.routineService.getApproachRetractRoutineOverview().subscribe(e=>{e&&(this.routineSelections=e.map(n=>({label:n.name,value:e.findIndex(t=>t.id===n.id)>-1?e.findIndex(t=>t.id===n.id)+1:1})),this.routineTooltip=this.routineSelections.map(n=>`${n.label}: ${n.value}`).join(`
`))})}rewriteInterlayerLayoutPoints(){this.palletizingData.generatorResults.interlayerLayoutPoints=this.interlayerTableData.map(e=>({x:e.x,y:e.y,a:e.a,approachRoutine:e.approachRoutine}))}rewriteLayerLayoutPositions(){let e=this.palletizingData.generatorResults.layerLayouts.find(n=>n.layerName===this.layerLayoutNameSelected);if(e){e.layerPositions=this.layerPointsTableData.map(t=>({x:t.x,y:t.y,a:t.a,approachRoutine:t.approachRoutine}));let n=this.palletizingData.generatorResults.layerLayouts.findIndex(t=>t.layerName===this.layerLayoutNameSelected);this.renderPatternResult(this.patternCanvas.nativeElement,this.palletizingData,n)}else this.messageService.add({severity:"error",summary:this.translateService.instant("MESSAGE.ERROR"),detail:this.translateService.instant("LAYER_PAGE.LAYOUT_NOT_FOUND")})}onSaveSchemaClicked(){let e=this.palletizingData.generatorResults.layerLayouts.reduce((t,r)=>(t[r.layerName]=r.layerPositions.map(({x:P,y:v,a:B,approachRoutine:De})=>({x:P,y:v,a:B,approachRoutine:this.routineSelections.find(ke=>ke.value===De)?.value||1})),t),{}),n={generatorConfigurationId:this.generatorConfigIdSelected,layoutSchemaId:this.layoutSchemaIdSelected,productLayoutSchema:e,interlayerLayoutSchema:this.palletizingData.generatorResults.interlayerLayoutPoints};this.layoutSchemaService.updateLayoutSchema(n).subscribe(t=>{t&&this.messageService.add({severity:"success",summary:this.translateService.instant("MESSAGE.SUCCESS"),detail:this.translateService.instant("LAYER_PAGE.UPDATE_SCHEMA_DETAIL",{name:t.name})})})}onDeleteSchemaClicked(){this.layoutSchemaService.deleteLayoutSchema(this.layoutSchemaIdSelected).subscribe(()=>{this.messageService.add({severity:"success",summary:this.translateService.instant("MESSAGE.SUCCESS"),detail:this.translateService.instant("LAYER_PAGE.DELETE_SCHEMA_DETAIL")}),this.layoutSchemaIdSelected=null,this.initLayoutSchemaSelections(),this.generatePattern()})}onLoadToPlcClicked(){this.dialogRef=this.dialogService.open(Ie,{header:this.translateService.instant("SYNC_PLC.ASSIGN_ENDPOINT"),width:"500px",contentStyle:{"max-height":"80vh",overflow:"auto"},baseZIndex:1e4}),this.dialogRef.onClose.subscribe(e=>{e&&this.syncDataToPlc(e)})}syncDataToPlc(e){this.blockedDocument=!0;let n={generatorConfigurationId:this.generatorConfigIdSelected,layoutSchemaId:this.layoutSchemaIdSelected,endpointUrl:e};this.layoutSchemaService.syncPalletizerResultToPLC(n).subscribe({next:t=>{t.success?this.messageService.add({severity:"success",summary:this.translateService.instant("MESSAGE.SUCCESS"),detail:this.translateService.instant("SYNC_PLC.SYNC_DETAIL_SUCCESS")}):this.messageService.add({severity:"warn",summary:this.translateService.instant("MESSAGE.WARN"),detail:this.translateService.instant("SYNC_PLC.SYNC_DETAIL_WARN",{message:t.message})})},error:t=>{this.messageService.add({severity:"error",summary:this.translateService.instant("MESSAGE.ERROR"),detail:this.translateService.instant("SYNC_PLC.SYNC_DETAIL_ERROR",{error:t})}),setTimeout(()=>{this.blockedDocument=!1,this.changeDetectorRef.markForCheck()},1e3)},complete:()=>{setTimeout(()=>{this.blockedDocument=!1,this.changeDetectorRef.markForCheck()},1e3)}})}translateLayerName(e){let n;switch(e){case"Odd Layer":n=this.translateService.instant("LAYER_PAGE.ODD_LAYER");break;case"Even Layer":n=this.translateService.instant("LAYER_PAGE.EVEN_LAYER");break;case"Top Layer":n=this.translateService.instant("LAYER_PAGE.TOP_LAYER");break;default:n=e;break}return n}static{this.\u0275fac=function(n){return new(n||i)(S(Te),S(me),S(be),S(N),S(Ae),S(K),S(ve))}}static{this.\u0275cmp=T({type:i,selectors:[["app-edit-layer-page"]],viewQuery:function(n,t){if(n&1&&H(Ue,5),n&2){let r;$(r=Q())&&(t.patternCanvas=r.first)}},standalone:!0,features:[M],decls:36,vars:35,consts:[["patternCanvas",""],["layerStacking",""],[1,"content-layout"],[1,"content-header",2,"flex","0 1 auto"],[1,"label"],[1,"header-block"],[1,"dropdown-block"],["optionLabel","label","optionValue","value",3,"ngModelChange","onChange","placeholder","options","ngModel"],["icon","pi pi-plus",3,"onClick","label","disabled"],["icon","pi pi-save",3,"onClick","label","disabled"],["icon","pi pi-trash",3,"onClick","label","disabled"],["icon","pi pi-download",3,"onClick","label","disabled"],[3,"blocked"],["ariaLabel","loading",3,"style",4,"ngIf"],[1,"content-wrapper",2,"flex","1 1 auto"],[1,"content-left"],["class","stack-block",4,"ngIf"],[1,"pattern-graph"],["style","margin-left: 40px;",4,"ngIf"],["width","400","height","400"],[1,"content-right"],[2,"flex","0 1 auto","width","100%"],[4,"ngIf"],[2,"flex","1 1 auto","width","100%"],["ariaLabel","loading"],[1,"stack-block"],[1,"stack-graph"],["class","stack-layer",4,"ngFor","ngForOf"],[1,"stack-pallet"],[1,"stack-description"],[1,"context"],[4,"ngFor","ngForOf"],[1,"stack-layer"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[2,"margin-left","40px"],[1,"table-header"],[3,"value"],["pTemplate","header"],["pTemplate","body"],[3,"pSelectableRow"],["pEditableColumnField","x",3,"pEditableColumn"],["pTemplate","input"],["pTemplate","output"],["pEditableColumnField","y",3,"pEditableColumn"],["pEditableColumnField","a",3,"pEditableColumn"],["pEditableColumnField","approachRoutine",3,"pEditableColumn"],["pInputText","","type","number",3,"ngModelChange","blur","keydown.enter","ngModel"],["pInputText","","type","number","tooltipEvent","focus","tooltipPosition","left",3,"ngModelChange","blur","keydown.enter","ngModel","pTooltip"],[1,"table-header","header-filter"]],template:function(n,t){if(n&1){let r=L();a(0,"div",2)(1,"div",3)(2,"label",4),m(3),g(4,"translate"),o(),a(5,"div",5)(6,"div",6)(7,"p-dropdown",7),g(8,"translate"),x("ngModelChange",function(v){return s(r),E(t.generatorConfigIdSelected,v)||(t.generatorConfigIdSelected=v),_(v)}),C("onChange",function(){return s(r),_(t.onGeneratorConfigurationChanged())}),o()(),a(9,"div",6)(10,"p-dropdown",7),g(11,"translate"),x("ngModelChange",function(v){return s(r),E(t.layoutSchemaIdSelected,v)||(t.layoutSchemaIdSelected=v),_(v)}),C("onChange",function(){return s(r),_(t.onLayoutSchemaChanged())}),o()(),a(12,"p-button",8),g(13,"translate"),C("onClick",function(){return s(r),_(t.showAddSchemaDialog())}),o(),a(14,"p-button",9),g(15,"translate"),C("onClick",function(){return s(r),_(t.onSaveSchemaClicked())}),o(),a(16,"p-button",10),g(17,"translate"),C("onClick",function(){return s(r),_(t.onDeleteSchemaClicked())}),o(),a(18,"p-button",11),g(19,"translate"),C("onClick",function(){return s(r),_(t.onLoadToPlcClicked())}),o(),b(20,"p-blockUI",12),h(21,He,1,3,"p-progressSpinner",13),o()(),a(22,"div",14)(23,"div",15),h(24,Xe,10,5,"div",16),a(25,"div",17),h(26,Ze,3,4,"div",18),b(27,"canvas",19,0),o()(),a(29,"div",20)(30,"div",21),h(31,pt,7,4,"div",22),o(),a(32,"div",23),h(33,St,10,9,"div",22),o()()()(),h(34,ft,2,2,"ng-template",null,1,J)}n&2&&(l(3),w("",u(4,21,"LAYER_PAGE.CONFIGURATION_SELECTION_LABEL")," *"),l(4),d("placeholder",u(8,23,"LAYER_PAGE.CONFIGURATION_SELECTION_PLACEHOLDER"))("options",t.generatorConfigSelections),f("ngModel",t.generatorConfigIdSelected),l(3),d("placeholder",u(11,25,"LAYER_PAGE.LAYOUT_SCHEMA_SELECTION_PLACEHOLDER"))("options",t.layoutSchemaSelections),f("ngModel",t.layoutSchemaIdSelected),l(2),d("label",u(13,27,"BUTTON.ADD"))("disabled",!t.generatorConfigIdSelected),l(2),d("label",u(15,29,"BUTTON.SAVE"))("disabled",!t.layoutSchemaIdSelected),l(2),d("label",u(17,31,"BUTTON.DELETE"))("disabled",!t.layoutSchemaIdSelected),l(2),d("label",u(19,33,"BUTTON.SYNC_PLC"))("disabled",!t.layoutSchemaIdSelected),l(2),d("blocked",t.blockedDocument),l(),d("ngIf",t.blockedDocument),l(3),d("ngIf",t.productsOnPallet),l(2),d("ngIf",t.productsOnPallet),l(5),d("ngIf",t.productsOnPallet),l(2),d("ngIf",t.productsOnPallet))},dependencies:[D,R,ge,A,he,Ce,Se,fe,ye,ue,O,ce,I,le,xe,Pe,ie,ee,te,ne,V,k],styles:[".content-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.content-layout[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{padding:1rem 1.75rem}.content-layout[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .header-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end;justify-content:flex-start;width:100%;min-width:600px;gap:1rem}.content-layout[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .header-block[_ngcontent-%COMP%]   .dropdown-block[_ngcontent-%COMP%]{width:45%;max-width:300px;padding-top:.5rem}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:100%;overflow-y:auto;scrollbar-width:thin;border-top:solid 2px #e5e7eb}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:35%;min-width:600px;margin-bottom:48px;overflow-y:auto;scrollbar-width:thin}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .stack-block[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:2rem 1rem 1rem;justify-content:center}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .stack-block[_ngcontent-%COMP%]   .stack-graph[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .stack-block[_ngcontent-%COMP%]   .stack-graph[_ngcontent-%COMP%]   .stack-layer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px;width:280px;background-color:#e5e7eb}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .stack-block[_ngcontent-%COMP%]   .stack-graph[_ngcontent-%COMP%]   .stack-pallet[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px;width:300px;background-color:#d3d3d3}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .stack-block[_ngcontent-%COMP%]   .stack-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:4px;position:relative;bottom:10px}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .stack-block[_ngcontent-%COMP%]   .stack-description[_ngcontent-%COMP%]   .context[_ngcontent-%COMP%]{color:gray;height:30px}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .pattern-graph[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;min-width:450px;min-height:450px;margin:1rem}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-left[_ngcontent-%COMP%]   .pattern-graph[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:65%;border-left:solid 2px #e5e7eb;margin-bottom:48px;overflow-y:auto;scrollbar-width:thin}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-right[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{font-weight:700;padding:.5rem 1rem;background-color:#e5e7eb}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-right[_ngcontent-%COMP%]   .header-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:1rem}.content-layout[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content-right[_ngcontent-%COMP%]   .header-filter[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]     .p-dropdown{min-width:100%}.spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%}"]})}}return i})();export{Ft as EditLayerPageComponent};
